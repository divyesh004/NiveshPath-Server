# बाहरी API इंटीग्रेशन गाइड

## Yahoo Finance API

NiveshPath सर्वर Yahoo Finance API का उपयोग करके रियल-टाइम स्टॉक मार्केट और करेंसी एक्सचेंज डेटा प्राप्त करता है। यह इंटीग्रेशन `external.controller.js` फ़ाइल में लागू किया गया है।

### सेटअप निर्देश

1. आवश्यक पैकेज इंस्टॉल करें:
   ```bash
   npm install yahoo-finance2
   ```

2. `.env` फ़ाइल में कोई API कुंजी की आवश्यकता नहीं है, क्योंकि Yahoo Finance API मुफ्त है और सार्वजनिक रूप से उपलब्ध है।

### उपयोग

#### स्टॉक मार्केट अपडेट

```javascript
// स्टॉक मार्केट अपडेट प्राप्त करें
GET /api/external/markets
```

यह एंडपॉइंट निम्नलिखित डेटा प्रदान करता है:
- NSE (NIFTY 50) और BSE (SENSEX) इंडेक्स मूल्य, परिवर्तन और प्रतिशत परिवर्तन
- टॉप गेनर्स (3 स्टॉक्स)
- टॉप लूजर्स (3 स्टॉक्स)

#### करेंसी एक्सचेंज डेटा

```javascript
// करेंसी एक्सचेंज डेटा प्राप्त करें
GET /api/external/currency
```

यह एंडपॉइंट INR के संदर्भ में विभिन्न मुद्राओं के लिए विनिमय दरें प्रदान करता है (USD, EUR, GBP, JPY, आदि)।

### एरर हैंडलिंग

API कॉल विफल होने पर, सिस्टम फॉलबैक डेटा प्रदान करता है ताकि एप्लिकेशन काम करना जारी रखे। फॉलबैक डेटा में एक संदेश शामिल होता है जो उपयोगकर्ता को सूचित करता है कि लाइव डेटा अनुपलब्ध है।

### रेट लिमिट्स

Yahoo Finance API पर रेट लिमिट्स हैं। अत्यधिक अनुरोधों से बचने के लिए, हमने निम्नलिखित उपाय किए हैं:

1. API कॉल के लिए 10 सेकंड का टाइमआउट सेट किया गया है
2. एक ही अनुरोध में कई स्टॉक्स/करेंसी पेयर्स के लिए डेटा प्राप्त करने के लिए बैचिंग का उपयोग किया गया है
3. विस्तृत लॉगिंग जोड़ी गई है ताकि किसी भी समस्या का निदान किया जा सके

### नोट्स

- Yahoo Finance API अनौपचारिक है और Yahoo द्वारा आधिकारिक रूप से समर्थित नहीं है
- भविष्य में API में परिवर्तन हो सकते हैं, जिससे कोड अपडेट की आवश्यकता हो सकती है
- उत्पादन उपयोग के लिए, एक वैकल्पिक या आधिकारिक API पर विचार करें जैसे कि Alpha Vantage, Finnhub, या NSE/BSE की आधिकारिक API